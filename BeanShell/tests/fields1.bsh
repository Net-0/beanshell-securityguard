#!/bin/java bsh.Interpreter

source("TestHarness.bsh");

assert( System.out instanceof java.io.OutputStream );

assert( Fields.getFields().x == 5 );
assert( Fields.getFields().getFields2().x == 5 );

foo() {
	x=5;
	return this;
}

f=foo();
assert( f.x == 5 );

// field access chained to scripted method invocation
// This used to be broken
assert( foo().x == 5 );

// Assignment to throw away value.
// This doesn't work! 
// I added some stuff to get it working but the grammar is failing to parse.
//foo().x=6;

//test ambiguity of field vs. method (there was a bug)

assert( Fields.getFields().ambigName.equals("field") );
assert( Fields.getFields().ambigName().equals("method") );

f=Fields.getFields();
assert( f.ambigName.equals("field") );
assert( f.ambigName().equals("method") );

complete();

